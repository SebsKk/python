import requests
from bs4 import BeautifulSoup as soup
from csv import writer
url = 'https://www.reddit.com/'
page = requests.get(url)
soupy = soup(page.content,'html.parser')

posts = soupy.find_all('div', {'class': '_1poyrkZ7g36PawDueRza-J _11R7M_VOgKO1RJyRSRErT3'})

with open('reddit.csv','w',newline='',encoding='utf8') as f:
    thewriter = writer(f)
    header = ['Title','No of comments']
    thewriter.writerow(header)

    for post in posts:
        titlo = post.find('h3', {'class': '_eYtD2XCVieq6emjKBH3m'}).text
        comments = post.find('span', {'class': 'FHCV02u6Cp2zYL0fhQPsO'}).text

        postinfo = [titlo,comments]
        thewriter.writerow(postinfo)
